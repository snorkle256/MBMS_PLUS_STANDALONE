# You must delete the NO_OP line below to enable docker compose

# DO NOT EDIT THIS LINE: managed by MBMS_PLUS deploy workflow
COMPOSE_FILE=docker-compose.yml:compose/bootstrap.yml:compose/indexing-cron.yml:compose/lm-bridge.yml:local/network.override.yml:compose/dockerhub-images.yml
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

# REQUIRED SETTING - go to https://metabrainz.org/profile
MUSICBRAINZ_REPLICATION_TOKEN=

# Recommended settings (most users should review these)
NO_OP=DELETE THIS LINE TO ENABLE COMPOSE UP

MUSICBRAINZ_WEB_SERVER_HOST=localhost
MUSICBRAINZ_WEB_SERVER_PORT=5000

# Provider keys for LM-Bridge (recommended if you use external providers)
FANART_KEY=
TADB_KEY=2
LASTFM_KEY=
LASTFM_SECRET=
SPOTIFY_ID=
SPOTIFY_SECRET=
SPOTIFY_REDIRECT_URL=http://HOST_IP:5001

# -------------------------------------------------------------------------------
# Intermediate settings (optional)
#
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

# - - - - - - - - - -
# Network type: bridge | macvlan | ipvlan
MUSICBRAINZ_NETWORK_TYPE=bridge
# Required for macvlan/ipvlan
MUSICBRAINZ_NETWORK_PARENT=
MUSICBRAINZ_NETWORK_SUBNET=
MUSICBRAINZ_NETWORK_GATEWAY=
# Optional for macvlan/ipvlan
MUSICBRAINZ_NETWORK_IP_RANGE=
# Optional: static IP for musicbrainz on macvlan/ipvlan (others stay on bridge)
MUSICBRAINZ_NETWORK_IP=
# Optional for ipvlan: l2 or l3
MUSICBRAINZ_IPVLAN_MODE=
# - - - - - - - - - -

MUSICBRAINZ_SERVER_PROCESSES=10

MUSICBRAINZ_REPLICATION_ENABLED=true
MUSICBRAINZ_REPLICATION_TIME=03:00

MUSICBRAINZ_INDEXING_ENABLED=true
MUSICBRAINZ_INDEXING_TIME=01:00
MUSICBRAINZ_INDEXING_DAY=Sunday
MUSICBRAINZ_INDEXING_FREQUENCY=weekly

POSTGRES_SHARED_BUFFERS=4GB
POSTGRES_SHM_SIZE=4GB
SOLR_HEAP=4g

## LM-Bridge (optional)
LMBRIDGE_IMAGE=espressomatic/lm-bridge:latest
LMBRIDGE_PORT=5001
# Optional: static LAN IP for lmbridge when macvlan/ipvlan is enabled
LMBRIDGE_NETWORK_IP=

MB_DB_HOST=db
MB_DB_PORT=5432
MB_DB_USER=musicbrainz
MB_DB_PASSWORD=musicbrainz
MB_DB_NAME=musicbrainz_db

LMBRIDGE_CACHE_DB=lm_cache_db
LMBRIDGE_CACHE_USER=lidarr
LMBRIDGE_CACHE_PASSWORD=lidarr
LMBRIDGE_CACHE_HOST=db
LMBRIDGE_CACHE_PORT=5432
# - - - - - - - - - -

REDIS_HOST=redis
REDIS_PORT=6379

SOLR_URL=http://search:8983/solr


MUSICBRAINZ_BOOTSTRAP_DB=1
MUSICBRAINZ_BOOTSTRAP_FETCH_DUMPS=1
MUSICBRAINZ_BOOTSTRAP_MATERIALIZED=1
MUSICBRAINZ_BOOTSTRAP_SEARCH_INDEXES=download
MUSICBRAINZ_BOOTSTRAP_SOLR_CLEANUP=0

# ===============================================================================
# ADVANCED - you shouldn't need to modify anything below
#
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

# Required for MusicBrainz Mirror CSS to render correctly
STATIC_RESOURCES_LOCATION=/static/build

ROOT_PATH=
LIDARR_METADATA_CONFIG=BRIDGE
USE_CACHE=true
PRODUCTION=false
ENABLE_STATS=false
DEBUG=false

MUSICBRAINZ_BASE_DOWNLOAD_URL=https://data.metabrainz.org/pub/musicbrainz
MUSICBRAINZ_BASE_FTP_URL=
MUSICBRAINZ_CAA_BASE_URL=

# Optional: overrides MUSICBRAINZ_REPLICATION_TIME when set (cron format)
MUSICBRAINZ_REPLICATION_SCHEDULE=

# Used only if you add compose/replication-cron.yml
MUSICBRAINZ_CRONTAB_PATH=./local/replication.cron
SIR_CONFIG_PATH=./default/indexer.ini

MUSICBRAINZ_SERVER_VERSION=v-2026-01-19.0
MUSICBRAINZ_BUILD_SEQUENCE=1
POSTGRES_VERSION=16
MB_SOLR_VERSION=4.1.0

MUSICBRAINZ_BOOTSTRAP_WGET_OPTIONS=
MUSICBRAINZ_BOOTSTRAP_DB_MARKER=/media/dbdump/.bootstrap.db.done
MUSICBRAINZ_BOOTSTRAP_MATERIALIZED_MARKER=/media/dbdump/.bootstrap.materialized.done
MUSICBRAINZ_BOOTSTRAP_SEARCH_MARKER=/var/cache/musicbrainz/solr-backups/.bootstrap.solr.done
MUSICBRAINZ_BOOTSTRAP_MARKER=/media/dbdump/.bootstrap.done
MUSICBRAINZ_BOOTSTRAP_WAIT_FOR_DB=1
MBMS_VERSION=0.5.0.008
MBMS_DOCKERHUB_NAMESPACE=espressomatic
MBMS_DOCKERHUB_REPO_PREFIX=mbms-plus
SIR_VERSION=4.0.1
RABBITMQ_TAG=3.6.16-management
